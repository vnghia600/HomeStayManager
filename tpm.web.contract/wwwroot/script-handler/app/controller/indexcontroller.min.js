var MasterPageController=function(n,t,i,r,u,f,e,o){t.MasterPage={IsLoading:!1};t.UserPricinpal={};t.DataRoot={};t.InitUserPrincipal=function(n,i){try{e.remove("UserPricinpal");n&&n.UserPermission&&n.UserPermission.length>0&&(n.UserPermission=n.UserPermission.map(n=>n.RoleFunctionName).filter((n,t,i)=>i.indexOf(n)===t));e.setObject("UserPricinpal",n);i&&(t.UserPricinpal.Token=n.Token,t.UserPricinpal.ExpireDate=n.ExpireDate)}catch(r){o.WriteLogServerError(r,"UserPricinpal.InitUserPrincipal")}};MasterData.NeedUpdate&&(MasterData.objUserPrincipal===undefined&&(MasterData.objUserPrincipal={}),t.InitUserPrincipal(MasterData.objUserPrincipal));t.UserPricinpal=e.getObject("UserPricinpal");t.UserPricinpal||(t.UserPricinpal={});MasterData.UserIDCurrent!==t.UserPricinpal.UserID&&(e.remove("UserPricinpal"),t.UserPricinpal={});t.MasterPage.RemoveCache=function(){i(function(){u.PostDataAjax("/OutputCaches/Remove",{},function(){},function(n){i(function(){if(n.objCodeStep.Status=="Error"){jAlert.Error(n.objCodeStep.Message);return}if(n.objCodeStep.Status=="Success"){jAlert.Success("Xóa Outputcache thành công");return}},100)},function(){return})})};t.UserPricinpal.IsInRole=function(n){let t=e.getObject("UserPricinpal");if(!t)return!1;let i=_.filter(t.UserPermission,function(t){return n==t?!0:!1});return i.length==0?!1:!0};t.UserPricinpal.IsAllowDepartment=function(n){return _.find(t.UserPricinpal.UserRoleDepartmentIDs,t=>t==n)!==undefined};t.scrollToTopInputValid=function(){$($(".has-error")[0])!=undefined&&$("html, body").animate({scrollTop:$($(".has-error")[0]).offset().top},"slow")};t.OutputTypeEnum=OutputTypeEnum};MasterPageController.$inject=["$scope","$rootScope","$timeout","$filter","CommonFactory","UtilFactory","$localstorage","ApiHelper"];